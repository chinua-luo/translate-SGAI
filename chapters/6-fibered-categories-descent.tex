\setcounter{chapter}{5} % because this is chapter 6

\chapter{Fibred Categories and Descent}

\setcounter{section}{-1}

\section{Introduction}

Contrary to what was said in the introduction to the previous chapter, it was impossible to make the descent in the category of preschemes, even in special cases, without having developed the language of descent in the general categories beforehand with sufficient care.

The notion of ``descent'' provides the general framework for all processes of ``re-gluing'' objects, and therefore of ``gluing'' of categories. 
The most classic case of re-gluing relates to the data of a topological space $X$ and of a cover of $X$ by open sets $X_i$; if we consider for all $i$ a space fibre (say) $E_i$ above $X_i$, and for every pair $(i, j)$ an isomorphism $f_{ji}$ of $E_i| X_{ij}$ on $E_j | X_{ij}$ (where we put $X_{ij} = X_i \cap Xj$), 
satisfying a well-known condition of transitivity (which we write in a short way $f_{kj} f_{ji} = f_{ki}$ ), 
we know that there is a fibrous space $E$ on $X$, defined as isomorphism with the condition that we have isomorphisms $f_i \colon E | X_i \xrightarrow{\simeq} E_i$, satisfying the relations $f_{ji} = f_jf_i^{-1}$ (with the usual writing abuse). 
Let $X'$ be the sum space of $X_i$, which is therefore a fibrous space above $X$ (i.e.\ provided with a continuous mapping $X' to X$ of $\E'$ on $X''= X' \times_X X'$, 
the collation condition can then be written as an identity between isomorphisms of fibrous spaces $\E_1'''$ and $\E_3'''$ on the triple fiber product $X'''= X' \times_X X' \times_X X'$ (where $E_i'''$ designates the inverse image of $E'$ on $X'''$ by the canonical projection of index $i$). 
The construction of $E$, from $E '$ and $f$, is a typical case of ``descent". 
Moreover, starting from a fibered space $E$ on $X$, one says that $X$ is ``locally trivial", of fiber $F$, if there exists an open covering $(X_i)$ of $X$ such that the $E| X_i$ are isomorphic to $F \times X_i$, or what amounts to the same, such as the inverse image $E'$ of $E$ on $X' = \coprod_i Xi$ is isomorphic to $X '\times F$.

Thus, the notion of ``gluing'' objects like the ``location'' of a property, are related to the study of certain types of ``basic changes'' $X '\to X$. 
In algebraic geometry, many other types of basic change, and in particular morphisms $X '\to X$ Thus, the notion of ``gluing'' objects like that of ``localization'' of a property and, are related to the study of certain types of ``basic changes'' $X '\to X$. 
In algebraic geometry, many other types of change of base, including the flattened $X '\to X$ morphisms must be considered as corresponding to a ``localization'' process with respect to the preschemes, or other objects, ``above'' $X$. This type of localization is used just as much as the simple topological localization (which is a special case besides). 
The same is true (to a lesser extent) in Analytical Geometry. 

Most demonstrations, reducing to verifications, are omitted or simply sketched out; in this case we specify the less obvious diagrams that are introduced into a demonstration.

\section{Universe, Categories, Equivalence of Categories}

To avoid certain logical difficulties, we will admit here the notion of Universe, which is a set ``big enough'' so that we do not leave it by the usual operations of set theory; an ``Axiom of Universes'' guarantees that every object is in a universe. 
For details, see a book in preparation by C. Chevalley and the lecturer (1). 
Thus, the acronym $\Ens$ designates, not the category of all sets (notion that does not make sense), but the category of sets found in a given universe (which we will not describe here in the notation). 
Similarly, $\Cat$ will indicate the category of categories in the Universe in question,
the ``morphisms'' from an object $X$ of $\Cat$ to another $Y$, being by definition the \emph{functors} from $X$ to $Y$.

If $\C$ is a category, we denote by $\Ob (\C)$ the \emph{set of objects} of $\C$, by $\Fl (\C)$ the \emph{set of arrows} of $\C$ (or morphisms of $\C$). 
We will then write $X \in \Ob (\C)$ avoiding the current notation abuse $X \in \C$. 
If $\C$ and $\C'$ are two categories, a \emph{functor} from $\C$ to $\C'$ will always be what is commonly called a \emph{covariant functor} from $\C$ to $\C'$; its data implies that of the target category and the source category, $\C$ and $\C'$. The functors from $\C$ to $\C'$ form a set, denoted $\Hom (\C, \C')$, which is the set of objects of a category denoted $\Hom (\C, \C')$.
By definition, a \emph{contravariant functor} from $\C$ to $\C'$ is a functor of the \emph{opposite category} $\C^{op}$ from $\C$ to $\C'$.

We will admit the notion of \emph{projective limit} and \emph{inductive limit} of a functor $F \colon \I \to \C$, and in particular the most common special cases of this notion:
Cartesian products and fiber products, dual notions of direct sums and amalgamated sums, and the usual formal properties of these operations.

For example, in the category $\Cat$ introduced earlier, the projective limits
(relating to categories found in the chosen Universe) exist; the set of objects (respectively the set of arrows) of the projective limit category $\C$ of the $\C_i$ is obtained by taking the projective limit of sets of objects (resp. arrows) of the categories $\C_i$. The best known case is that of the product of a family of
categories. We will use constantly hereafter the fiber product of two categories
on a third.

For all that concerns categories and functors, while waiting for the book already in preparation, see [1] (which is necessarily very incomplete, even in
concerning the generalities outlined in this issue).

Let us take this opportunity to explain the concept of equivalence of categories, which is not satisfactorily exposed in [1]. 
A functor $F \colon \C \to \C'$ is said to be \emph{faithful} (resp. \emph{fully faithful}) if for any pair of objects $S, T$ of $\C$, the function $u \mapsto F (u)$ from $\Hom (S, T)$ to $\Hom (F (S), F (T))$ is injective (respectively bijective). 
We say that $F$ is an \emph{equivalence} of categories if $F$ is fully faithful, and if any object $S'$ of $\C'$ is isomorphic to an object of the form $F (S)$.
We show that it is the same to say that there exists a functor $G$ from $\C'$ to $\C$ quasi-inverse of $F$, i.e.\ such that $GF$ is isomorphic to $id_\C$.
When this is so, the data of a functor $G \colon \C' \to \C$ and an isomorphism $\varphi \colon GF \to id_{\C'}$ equals the data, for all $S' \in \Ob (\C')$, of a pair $(S, u)$ consisting of an object $S$ of $\C$ and an isomorphism $u \colon F (S) \to S'$, i.e.\ $(G (S), \varphi (S))$.

(With these notations, there exists a unique functor $C' \to C$ having the given function $S \mapsto G (S)$ as function-objects, and such that the function $S \mapsto \varphi (S)$ is a homomorphism of functors $FG \to id_{\C'}$).
%
Finally, if $G$ is a quasi-inverse functor of $F$, and if one chooses isomorphisms $\varphi \colon FG \xrightarrow{\sim} id_{\C'}$ and $\psi \colon GF \xrightarrow{sim} id_\C$, then the two compatibility conditions on $\varphi$ and $\psi$ stated in [1, I.1.2] are in fact equivalent to each other, and for every isomorphism $\varphi$ chosen, there exists a unique isomorphism such that these conditions are satisfied.

\section{Categories over another}

\section{Change of base in categories over E}

\section{Fibred categories; Equivalence of E-categories}

\section{Cartesian morphisms, inverse images, Cartesian functors}

\section{Fibred categories and prefibred categories. Products and change of base in icelles(?)}

\section{Cloven categories over E}

\section{Cloven Fibration defined from a pseudofunctor}

Call, to abbreviate, pseudofunctor of $\E^{op}$ in $\Cat$ (it should be said, pseudo-normalized functor), a set of data a), b), c) as above, satisfying the conditions A ') and B). 
In the previous section, we have associated a pseudofunctor $\E^{op} \to \Cat$ with a split fibration normalized on $\E$, here we will indicate the inverse construct. 
We will leave the reader to verify most of the details, as well as the fact that these constructions are ``inverse'' to each other. 
Specifically, we should consider the pseudofunctors $\E^{op} \to \Cat$ as the objects of a new category, and show that our constructions provide equivalences, quasi-inverses one from the other, between the latter and the category of cloven categories above $\E$, defined in the preceding section.

We put 
\[\F_\circ = \coprod_{S \in \Ob (\E)} \Ob(\F(S)),\] 
together sum of sets $\Ob(\F (S))$ (N.B.\ we will note here $\F(S)$ and not $\F_S$ the value in the object $S$ of $\E$ of the pseudofunctor gives, to avoid confusion of notation thereafter). So we have an obvious mapping: 
\[p_\circ \colon \F_\circ \to \Ob \E.\]
Let 
\[\oxi = (S, \xi), \, \oeta = (T, \eta) \qquad (\text{where } \xi \in \Ob \F(S), \, \eta \in \Ob \F(T))\]
two elements of $\F_\circ$, and $f \in \Hom(T,S)$, we let
\[h_f(\oeta, \oxi) = \Hom_{\F(T)}(\eta, f^\ast(\xi)).\]
If we also have a morphism $g \colon U \to T$ in $\E$, and a $\zeta \in \Ob \F (U)$, we define a function, denoted $(u,v) \mapsto u \circ v$:
\[h_f(\oeta, \oxi) \times h_g(\ozeta, \oeta) \to h_{fg}(\ozeta, \oxi),\]
i.e.\ a function
\[Hom_{\F(T)} (\eta, f^\ast(\xi)) \times \Hom_{\F(U)} (\zeta, g^\ast(\eta)) \to \Hom_{\F(U)} (\zeta, (fg)^\ast(\xi)),\]
for the formula
\[u \circ v = c_{f,g} (\xi) \cdot g^\ast(U) \cdot v,\]
i.e.\ $u \circ v$ is the composite of the sequence 
\[
\zeta \xrightarrow{u} g^\ast(\eta) \xrightarrow{g^\ast(u)} g^\ast f^\ast(\xi) \xrightarrow{c_{f,g}(\xi)} (fg)^\ast(\xi).\]
On the other hand 
\[
    h(\oeta, \oxi) = \coprod_{f \in \Hom(T,S)} h_f(\oeta, \oxi),
\]
and the previous couplings define couplings
\[h(\oeta, \oxi) \times h(\ozeta, \oeta) \to h(\ozeta, \oxi),\]
while the definition of $h (\oeta, \oxi)$ implies an obvious function:
\[p_{\oeta, \oxi}
\colon h(\oeta, \oxi) \to \Hom(T, S).\]
That said, we check the following points:
\begin{enumerate}
    \item The composition between elements of $h (\oeta, \oxi)$ is \emph{associative}.
    \item For all $\oxi = (\xi, S)$ in $\F_\circ$, consider the identity element of
    \[h_{id_S} (\oxi, \oxi) = \Hom_{\F(S)} (id_S^\ast(\xi), \xi) = \Hom_{\F(S)}(\xi,\xi),\]
    and its image in $h (\oxi,\oxi)$. This object is a unit on the left and right for the composition between elements of $h (\oeta, \oxi)$.
\end{enumerate}

This already shows that we get a category $\F$, by posing
\[\Ob \F = \F_\circ, \quad \Fl \F = \coprod_{\oxi, \oeta \in \F_\circ} h(\oeta, \oxi).\]

(N.B.\ we can not simply take for $\Fl \F$ the union of the sets $h (\oeta, \oxi)$, because these are not necessarily disjoint.) Furthermore:
\begin{enumerate}
    \setcounter{enumi}{2}
    \item The functions $p_\circ \colon \Ob \F \to \Ob \E$ and $p_1 = (p_{\oeta, \oxi} \colon \Fl\F \to \Fl \E$ define a \emph{functor} $p \colon \F \to \E$. In this way, F becomes a category on E, moreover the obvious function $h_f (\oeta, \oxi) \to \Hom (\oeta, \oxi)$ induces a \emph{bijection}
    \[h_f(\oeta, \oxi) \xrightarrow{\sim} \Hom_f(\oeta, \oxi).\]
    \item The obvious functions
    \[\Ob \F(S) \to \F_\circ = \Ob \F, \quad \Fl \F(S) \to \Fl\F,\]
    or the second is defined by the obvious functions
    \[\Hom_{\F(S)} (\xi, \xi') = h_{id_S}(\oxi,\oxi') \to \Hom(\oxi, \oxi')\]
    define an \emph{isomorphism}
    \[i_S \colon \F(S) \xrightarrow{\sim} \F_S.\]
    \item For every object $\oxi = (S, \xi)$ of $\F$, and every morphism $f \colon T \to S$ of $\E$, let us consider the element $\oeta = (T, \eta)$ of $\F_T$, 
    with $\eta = f^\ast (\xi)$, and the element $\alpha_f (\xi)$ of $\Hom (\oeta, \oxi)$, image of $id_{f^\ast (\xi)}$ by the morphism $\Hom_{\F (T)} (f^\ast(\xi), f ^\ast(\xi)) = h_f (\oeta, \oxi) \to \Hom_f (\oeta, \oxi)$. \emph{This element is cartesian, 
    and that's the identity in $\xi$ if $f = id_S$}, in other words, the whole $\alpha_f (\xi)$ defines a normalized cleavage of $F$ over $E$. 
    Moreover, by construction, we have commutativity in the functor diagram
    \[
    \begin{tikzcd}
        \F(S)
        \arrow[r, "f^\ast"]
        \arrow[d, "i_S", swap]
        &
        \F(T)
        \arrow[d, "i_T"]
        \\
        \F_S
        \arrow[r, "f^\ast_\F", swap]
        &
        \F_T
    \end{tikzcd}\]
    where $f^\ast_\F$ is the inverse image functor by $f$, relative to the cleavage considered on $\F$. Finally:
    \item the homomorphisms $c_{f, g}$ given by the pseudofunctor are transformed, by the isomorphisms $i_S$, in functorial homomorphisms $c_{f, g}$ associated with the cleavage of $\F$.
\end{enumerate}
We confine ourselves to giving the verification of 1) (which is, if possible, less trivial than the others). It is enough to prove the associativity of the composition between the objects of sets of the form $h_f (\oeta, \oxi)$. So let's consider in $\E$ morphisms
\[
    S \xleftarrow{f} T \xleftarrow{g} U \xleftarrow{h} V
\]
and the objects
\[\xi, \eta, \zeta, \tau\]
in $\F (S), \F (T), \F (U), \F (V)$, finally some elements
\begin{align*}
    &u \in h_f(\oeta, \oxi) = \Hom_{\F(T)} (\eta, f^\ast(\xi))\\
    &v \in h_g(\ozeta, \oeta) = \Hom_{\F(U)} (\zeta, g^\ast(\eta))\\
    &w \in h_h(\otau, \ozeta) = \Hom_{\F(V)} (\tau, h^\ast(\zeta)).
\end{align*}
We want to prove the formula
\[(u \circ v) \circ w = u \circ (v \circ w),
\]
which is an equality in $\Hom_{\F (V)} (\tau, (fgh)^\ast(\xi))$. By virtue of the definitions both members of this equality are obtained by composition following the superior contour and bottom of the diagram below:
\[
\begin{tikzcd}
    \tau
    \arrow[r, "w"]
    \arrow[rrd, "v \circ w", swap]
    &
    h^\ast(\zeta) 
    \arrow[r, "h^\ast(v)"]
    \arrow[rrr, "h^\ast (u \circ v)", bend left]
    &
    h^\ast g^\ast(\eta)
    \arrow[r, "h^\ast g^\ast (u)"]
    \arrow[d, "c_{g,h}(\eta)", swap]
    &
    h^\ast g^\ast f^\ast (\xi)
    \arrow[r, "h^\ast (c_{f,g}(\xi))"]
    \arrow[d, "c_{g,h}(f^\ast (\xi))"]
    &
    h^\ast (fg)^\ast (\xi)
    \arrow[d, "c_{fg,h}(\xi)"]
    \\&&
    (gh)^\ast (\eta)
    \arrow[r, "(gh)^\ast (\eta)", swap]
    &
    (gh)^\ast f^\ast (\xi)
    \arrow[r, "c_{f,gh}(\xi)", swap]
    &
    (fgh)^\ast (\xi)
\end{tikzcd}\]
Now the middle square is commutative because $c_{g, h}$ is a functorial homomorphism, and
the square on the right is commutative under condition B) for a pseudofunctor.
Hence the desired result.

Of course, it remains to be precise, when the pseudofunctor envisaged comes from already a normalized cloven category $\F'$
over $\E$, how do we get an natural isomorphism between $\F'$ and $\F$. We leave the details to the reader.

We also allow the reader to interpret, in terms of pseudofunctors, the notion of inverse image of a split category $\F$ over $\E$ by a change of base functor $\E'\to \E$.
